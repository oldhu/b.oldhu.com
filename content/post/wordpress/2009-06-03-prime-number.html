---
date: 2009-06-03T00:00:00Z
meta:
  spaces_015d7b4f062484448a25cb284aad14b2_permalink: http://cid-a65130fddc997385.users.api.live.net/Users(-6462330123414047867)/Blogs('A65130FDDC997385!105')/Entries('A65130FDDC997385!1420')?authkey=v0kyaOGV0mw%24
published: true
status: publish
tags: []
title: 质数/素数的检验与生成
type: post
url: /2009/06/03/prime-number/
---

<div id="msgcns!A65130FDDC997385!1420" class="bvMsg"><p>在做Project Euler的第4题，是关于质数的。</p>
<p>有以下事实很有趣：</p>
<p>1. 一个合数总是可以分解成若干个质数的乘积。很明显，也很容易证明。</p>
<p>2. 判断一个数X是质数，只要用X依次除小于SQRT(X)的质数，看是否可整除即可。如果你有一个生成过的质数序列的缓存，这里就可以用上了...</p>
<p>3. 判断一个数X不是质数，可首先检查它是不是某个质数的整数倍，这里同样可以用上缓存。</p>
<p>4. 纯数值计算，Ruby 1.9比Ruby 1.8至少快一倍</p>
<p>所以：</p>
<p>1. 要分解一个数，我们只需要尝试质数即可，所以我们需要一个从小到大的质数序列</p>
<p>2. 要生成一个质数序列，非常容易，只要保存一个质数由小到大的数组，这个数组中开始可以只有一个数字2，然后：</p>
<p>1) 取出数组中最大的数，作为要寻找的下一个素数X</p>
<p>2) 从已有的质数序列中取出所有小于SQRT(X)的数，用X依次除，只要除不尽，X就是素数，只要除尽，X就不是素数</p>
<p>3) 如果X是素数，将X加入数组</p>
<p>4) 如果X不是素数，将X加1，重复2)</p>
</div>
